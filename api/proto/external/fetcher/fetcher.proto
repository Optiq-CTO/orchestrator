syntax = "proto3";

package fetcher;

option go_package = "github.com/Optiq-CTO/fetcher/api/proto";

import "google/protobuf/timestamp.proto";
import "api/proto/external/analyzer/analyzer.proto";

service FetcherService {
  rpc FetchContent(FetchRequest) returns (FetchResponse) {}
}

message FetchRequest {
  string platform = 1; // "reddit", "meta"
  string query = 2;    // subreddit or page_id
  map<string, string> credentials = 3; // "access_token", "app_id", etc.
  string model_provider = 4;
}

message FetchResponse {
  repeated FetchedItem items = 1;
}

message FetchedItem {
  string platform = 1;
  string source_id = 2;
  string content_text = 3;
  string content_url = 4;
  google.protobuf.Timestamp published_at = 5;
  analyzer.AnalyzeContentResponse analysis = 6;
}
